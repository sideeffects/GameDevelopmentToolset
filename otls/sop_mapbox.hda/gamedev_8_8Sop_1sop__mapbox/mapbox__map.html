<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>Title</title>    <script src='http://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>    <link href='http://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' /></head><body>    <div id="map" style="width:512px; height:512px;"></div>    <script>        function bootstrap() {          var intervalCount = 0;          var looper = window.setInterval(function() {            intervalCount = intervalCount + 1;            if (window.L && window.L.version) {              window.clearInterval(looper);              init();            }            if (intervalCount > 10) {              window.clearInterval(looper);            }          }, 500);        }        function update(map) {          var center = map.getCenter();          var zoom = map.getZoom();          if (zoom != parseInt(zoom))          {            map.setZoom(parseInt(zoom));          }          bounds = map.getBounds();          location.hash = center.lng +"," + center.lat + "," + parseInt(zoom) + "," + bounds.getNorthEast().lat + "," + bounds.getNorthEast().lng + "," + bounds.getSouthWest().lat+ "," + bounds.getSouthWest().lng;        }        function init() {          var hash = location.hash.substring(1).split(",");          L.mapbox.accessToken = hash[3];          var map = L.mapbox.map('map', 'mapbox.satellite', {            maxZoom: 14,            scrollZoom:false,            center: [hash[1], hash[0]],            zoom: hash[2],            boxZoom:false,            doubleClickZoom:false,          });          map.on('moveend', function() { update(map); });          update(map);        }        if (document.readyState === 'complete') {          bootstrap();        } else {          window.addEventListener('load', bootstrap);        }    </script></body></html>